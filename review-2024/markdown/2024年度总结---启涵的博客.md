**抱歉，您的浏览器无法访问本站**  
本页面需要浏览器支持（启用）JavaScript  
[**了解详情 >**](https://www.baidu.com/s?wd=启用JavaScript)

/\*\*\*\*\*\*\*\*\*\*\*\*这个文件存放不需要重载的全局变量和全局函数\*\*\*\*\*\*\*\*\*/ window.volantis = {}; // volantis 全局变量 volantis.debug = "false"; // 调试模式 volantis.dom = {}; // 页面Dom see: /source/js/app.js etc. /\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\* volantis.dom.$ \*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*/ // 注：这里没有选择器，也没有forEach一次只处理一个dom，这里重新封装主题常用的dom方法，返回的是dom对象，对象包含了以下方法，同时保留dom的原生API function volantisDom(ele) { if (!ele) ele = document.createElement("div") this.ele = ele; // ============================================================== this.ele.find = (c) => { let q = this.ele.querySelector(c) if (q) return new volantisDom(q) } // ============================================================== this.ele.hasClass = (c) => { return this.ele.className.match(new RegExp('(\\\\s|^)' + c + '(\\\\s|$)')); } this.ele.addClass = (c) => { this.ele.classList.add(c); return this.ele } this.ele.removeClass = (c) => { this.ele.classList.remove(c); return this.ele } this.ele.toggleClass = (c) => { if (this.ele.hasClass(c)) { this.ele.removeClass(c) } else { this.ele.addClass(c) } return this.ele } // ============================================================== this.ele.on = (c, f) => { this.ele.addEventListener(c, f, false) return this.ele } this.ele.click = (f, r) => { this.ele.on("click", f, r) return this.ele } this.ele.scroll = (f, r) => { this.ele.on("scroll", f, r) return this.ele } // ============================================================== this.ele.html = (c) => { // if(c=== undefined){ // return this.ele.innerHTML // }else{ this.ele.innerHTML = c return this.ele // } } // ============================================================== this.ele.hide = (c) => { this.ele.style.display = "none" return this.ele } this.ele.show = (c) => { this.ele.style.display = "block" return this.ele } // ============================================================== return this.ele } volantis.dom.$ = (ele) => { return !!ele ? new volantisDom(ele) : null; } /\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\* RunItem \*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*/ function RunItem() { this.list = \[\]; // 存放回调函数 this.start = () => { for (var i = 0; i < this.list.length; i++) { this.list\[i\].run(); } }; this.push = (fn, name, setRequestAnimationFrame = true) => { let myfn = fn if (setRequestAnimationFrame) { myfn = () => { volantis.requestAnimationFrame(fn) } } var f = new Item(myfn, name); this.list.push(f); }; this.remove = (name) => { for (let index = 0; index < this.list.length; index++) { const e = this.list\[index\]; if (e.name == name) { this.list.splice(index, 1); } } } // 构造一个可以run的对象 function Item(fn, name) { // 函数名称 this.name = name || fn.name; // run方法 this.run = () => { try { fn() } catch (error) { console.log(error); } }; } } /\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\* RightMenu \*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*/ // volantis.rightmenu.handle(callBack\[,"callBackName"\]) 外部菜单项控制 // 可在 volantis.mouseEvent 处获取右键事件 volantis.rightmenu = {}; volantis.rightmenu.method = { handle: new RunItem(), } volantis.rightmenu = Object.assign(volantis.rightmenu, { handle: volantis.rightmenu.method.handle.push, }); /\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\* Dark Mode \*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*/ // /layout/\_partial/scripts/darkmode.ejs // volantis.dark.mode 当前模式 dark or light // volantis.dark.toggle() 暗黑模式触发器 // volantis.dark.push(callBack\[,"callBackName"\]) 传入触发器回调函数 volantis.dark = {}; volantis.dark.method = { toggle: new RunItem(), }; volantis.dark = Object.assign(volantis.dark, { push: volantis.dark.method.toggle.push, }); /\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\* Message \*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*/ // VolantisApp.message /\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\* isMobile \*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*/ // /source/js/app.js // volantis.isMobile // volantis.isMobileOld /\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*脚本动态加载函数\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*/ // volantis.js(src, cb) cb 可以传入onload回调函数 或者 JSON对象 例如: volantis.js("src", ()=>{}) 或 volantis.js("src", {defer:true,onload:()=>{}}) // volantis.css(src) // 返回Promise对象，如下方法同步加载资源，这利于处理文件资源之间的依赖关系，例如：APlayer 需要在 MetingJS 之前加载 // (async () => { // await volantis.js("...theme.plugins.aplayer.js.aplayer...") // await volantis.js("...theme.plugins.aplayer.js.meting...") // })(); // 已经加入了setTimeout volantis.js = (src, cb) => { return new Promise(resolve => { setTimeout(function () { var HEAD = document.getElementsByTagName("head")\[0\] || document.documentElement; var script = document.createElement("script"); script.setAttribute("type", "text/javascript"); if (cb) { if (JSON.stringify(cb)) { for (let p in cb) { if (p == "onload") { script\[p\] = () => { cb\[p\]() resolve() } } else { script\[p\] = cb\[p\] script.onload = resolve } } } else { script.onload = () => { cb() resolve() }; } } else { script.onload = resolve } script.setAttribute("src", src); HEAD.appendChild(script); }); }); } volantis.css = (src) => { return new Promise(resolve => { setTimeout(function () { var link = document.createElement('link'); link.rel = "stylesheet"; link.href = src; link.onload = resolve; document.getElementsByTagName("head")\[0\].appendChild(link); }); }); } /\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*按需加载的插件\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*/ // volantis.import.jQuery().then(()=>{}) volantis.import = { jQuery: () => { if (typeof jQuery == "undefined") { return volantis.js("https://mirrors.sustech.edu.cn/cdnjs/ajax/libs/jquery/3.7.1/jquery.min.js") } else { return new Promise(resolve => { resolve() }); } } } /\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\* requestAnimationFrame \*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*/ // 1、requestAnimationFrame 会把每一帧中的所有 DOM 操作集中起来，在一次重绘或回流中就完成，并且重绘或回流的时间间隔紧紧跟随浏览器的刷新频率，一般来说，这个频率为每秒60帧。 // 2、在隐藏或不可见的元素中，requestAnimationFrame 将不会进行重绘或回流，这当然就意味着更少的的 cpu，gpu 和内存使用量。 volantis.requestAnimationFrame = (fn) => { if (!window.requestAnimationFrame) { window.requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame; } window.requestAnimationFrame(fn) } /\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\* layoutHelper \*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*/ volantis.layoutHelper = (helper, html, opt) => { opt = Object.assign({ clean: false}, opt) function myhelper(helper, html, clean) { volantis.tempDiv = document.createElement("div"); volantis.tempDiv.innerHTML = html; let layoutHelper = document.querySelector("#layoutHelper-" + helper) if (layoutHelper) { if (clean) { layoutHelper.innerHTML = "" } layoutHelper.append(volantis.tempDiv); } } myhelper(helper, html, opt.clean) } /\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\* 滚动事件处理 \*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*/ volantis.scroll = { engine: new RunItem(), unengine: new RunItem(), }; volantis.scroll = Object.assign(volantis.scroll, { push: volantis.scroll.engine.push, }); // 滚动条距离顶部的距离 volantis.scroll.getScrollTop = () => { let scrollPos; if (window.pageYOffset) { scrollPos = window.pageYOffset; } else if (document.compatMode && document.compatMode != 'BackCompat') { scrollPos = document.documentElement.scrollTop; } else if (document.body) { scrollPos = document.body.scrollTop; } return scrollPos; } volantis.scroll.scrollHeight = function () { return Math.max( document.body.scrollHeight, document.documentElement.scrollHeight, ) } volantis.scroll.offsetHeight = function () { return Math.max( document.body.offsetHeight, document.documentElement.offsetHeight, document.body.clientHeight, document.documentElement.clientHeight ) } volantis.scroll.progress = function () { return volantis.scroll.getScrollTop() / (volantis.scroll.scrollHeight() - volantis.scroll.offsetHeight()) } // 使用 requestAnimationFrame 处理滚动事件 // \`volantis.scroll.del\` 中存储了一个数值, 该数值检测一定时间间隔内滚动条滚动的位移, 数值的检测频率是浏览器的刷新频率. 数值为正数时, 表示向下滚动. 数值为负数时, 表示向上滚动. volantis.scroll.handleScrollEvents = () => { volantis.scroll.lastScrollTop = volantis.scroll.getScrollTop() function loop() { const scrollTop = volantis.scroll.getScrollTop(); if (volantis.scroll.lastScrollTop !== scrollTop) { volantis.scroll.del = scrollTop - volantis.scroll.lastScrollTop; volantis.scroll.lastScrollTop = scrollTop; // if (volantis.scroll.del > 0) { // console.log("向下滚动"); // } else { // console.log("向上滚动"); // } // 注销过期的unengine未滚动事件 volantis.scroll.unengine.list = \[\] volantis.scroll.engine.start(); } else { volantis.scroll.unengine.start(); } volantis.requestAnimationFrame(loop) } volantis.requestAnimationFrame(loop) } volantis.scroll.handleScrollEvents() volantis.scroll.ele = null; // 触发页面滚动至目标元素位置 volantis.scroll.to = (ele, option = {}) => { if (!ele) return; volantis.scroll.ele = ele; // 默认配置 opt = { top: ele.getBoundingClientRect().top + document.documentElement.scrollTop, behavior: "smooth" } // 定义配置 if ("top" in option) { opt.top = option.top } if ("behavior" in option) { opt.behavior = option.behavior } if ("addTop" in option) { opt.top += option.addTop } if (!("observerDic" in option)) { option.observerDic = 100 } // 滚动 window.scrollTo(opt); // 监视器 // 监视并矫正元素滚动到指定位置 // 用于处理 lazyload 引起的 cls 导致的定位失败问题 // option.observer = false if (option.observer) { setTimeout(() => { if (volantis.scroll.ele != ele) { return } volantis.scroll.unengine.push(() => { let me = ele.getBoundingClientRect().top if (!(me >= -option.observerDic && me <= option.observerDic)) { volantis.scroll.to(ele, option) } volantis.scroll.unengine.remove("unengineObserver") }, "unengineObserver") }, 1000) } } /\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\* Content Visibility \*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*/ // 见 source/css/first.styl 如果遇到任何问题 删除 .post-story 即可 // 一个元素被声明 content-visibility 属性后 如果元素不在 viewport 中 浏览器不会计算其后代元素样式和属性 从而节省 Style & Layout 耗时 // content-visibility 的副作用: 锚点失效 等等(实验初期 暂不明确), 使用此方法清除样式 volantis.cleanContentVisibility = () => { if (document.querySelector(".post-story")) { console.log("cleanContentVisibility"); document.querySelectorAll(".post-story").forEach(e => { e.classList.remove("post-story") }) } } /\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*/ /\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*/ /\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*/ //图像加载出错时的处理 function errorImgAvatar(img) { img.src = "https://cdn.jsdmirror.com/npm/codeqihan-public@1.0.2/icon.png"; img.onerror = null; } function errorImgCover(img) { img.src = "https://cdn.jsdmirror.com/npm/volantis-static@0.0.1660614606622/media/placeholder/cover/76b86c0226ffd.svg"; img.onerror = null; } /\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*/ window.pdata={} pdata.ispage=true; pdata.commentPath=""; pdata.commentPlaceholder=""; pdata.commentConfig={}; volantis.GLOBAL\_CONFIG ={ root: '/', debug: false, default: {"avatar":"https://cdn.jsdmirror.com/npm/codeqihan-public@1.0.2/icon.png","link":"https://cdn.jsdmirror.com/npm/volantis-static@0.0.1660614606622/media/placeholder/link/8f277b4ee0ecd.svg","cover":"https://cdn.jsdmirror.com/npm/volantis-static@0.0.1660614606622/media/placeholder/cover/76b86c0226ffd.svg","image":"https://cdn.jsdmirror.com/npm/volantis-static@0.0.1660614606622/media/placeholder/image/2659360.svg"}, lastupdate: new Date(1736313796537), cdn: { izitoast\_css: 'https://mirrors.sustech.edu.cn/cdnjs/ajax/libs/izitoast/1.4.0/css/iziToast.min.css', izitoast\_js: 'https://mirrors.sustech.edu.cn/cdnjs/ajax/libs/izitoast/1.4.0/js/iziToast.min.js', fancybox\_css: 'https://mirrors.sustech.edu.cn/cdnjs/ajax/libs/fancyapps-ui/5.0.36/fancybox/fancybox.min.css', fancybox\_js: 'https://mirrors.sustech.edu.cn/cdnjs/ajax/libs/fancyapps-ui/5.0.36/fancybox/fancybox.umd.min.js' }, sidebar: { for\_page: \["blogger","category","tagcloud","donate","webinfo"\], for\_post: \["toc","webinfo"\], webinfo: { lastupd: { enable: true, friendlyShow: true }, runtime: { data: "2022/09/08", unit: "天" } } }, plugins: { message: {"enable":true,"icon":{"default":"fa-solid fa-info-circle light-blue","quection":"fa-solid fa-question-circle light-blue"},"time":{"default":5000,"quection":20000},"position":"topRight","transitionIn":"bounceInLeft","transitionOut":"fadeOutRight","titleColor":"var(--color-text)","messageColor":"var(--color-text)","backgroundColor":"var(--color-card)","zindex":2147483647,"copyright":{"enable":true,"title":"知识共享许可协议","message":"请遵守 CC BY-NC-SA 4.0 协议。","icon":"far fa-copyright light-blue"},"aplayer":{"enable":true,"play":"fa-solid fa-play","pause":"fa-solid fa-pause"},"rightmenu":{"enable":true,"notice":true}}, rightmenus: {"enable":true,"order":\["plugins.navigation","hr","plugins.inputBox","plugins.seletctText","plugins.elementCheck","plugins.elementImage","menus.link","hr","menus.darkMode","plugins.articlePage","music"\],"options":{"iconPrefix":"fa-solid","articleShowLink":true,"musicAlwaysShow":true},"plugins":{"navigation":\[{"id":"left","name":"转到上一页","icon":"fa-solid fa-arrow-left","event":"history.back()","group":"navigation"},{"id":"right","name":"转到下一页","icon":"fa-solid fa-arrow-right","event":"history.forward()","group":"navigation"},{"id":"redo","name":"刷新当前页面","icon":"fa-solid fa-redo","event":"window.location.reload()","group":"navigation"},{"id":"up","name":"回到顶部","icon":"fa-solid fa-arrow-up","event":"VolantisApp.scrolltoElement(volantis.dom.bodyAnchor)","group":"navigation"}\],"inputBox":\[{"id":"copyPaste","name":"粘贴文本","icon":"fa-solid fa-paste","event":"copyPaste","group":"inputBox"},{"id":"copyAll","name":"全选文本","icon":"fa-solid fa-object-ungroup","event":"copyAll","group":"inputBox"},{"id":"copyCut","name":"剪切文本","icon":"fa-solid fa-cut","event":"copyCut","group":"inputBox"}\],"seletctText":\[{"id":"copyText","name":"复制文本","icon":"fa-solid fa-copy","event":"copyText","group":"seletctText"},{"id":"searchWord","name":"站内搜索","icon":"fa-solid fa-search","event":"OpenSearch(\_\_text\_\_)","group":"seletctText"},{"id":"bingSearch","name":"必应搜索","icon":"fa-solid fa-search","event":"window.open(\`https://cn.bing.com/search?q=${\_\_text\_\_}\`)","group":"seletctText"}\],"elementCheck":\[{"id":"openTab","name":"新标签页打开","icon":"fa-solid fa-external-link-square-alt","event":"window.open(\_\_link\_\_)","group":"elementCheck"},{"id":"copyLink","name":"复制链接地址","icon":"fa-solid fa-link","event":"copyLink","group":"elementCheck"}\],"elementImage":\[{"id":"copyImg","name":"复制图片","icon":"fa-solid fa-image","event":"copyImg","group":"elementImage"},{"id":"googleImg","name":"谷歌识图","icon":"fa-solid fa-images","event":"window.open(\`https://www.google.com.hk/searchbyimage?image\_url=${\_\_link\_\_}\`)","group":"elementImage"}\],"articlePage":\[{"id":"printMode","name":"打印页面","icon":"fa-solid fa-print","event":"printMode","group":"articlePage"},{"id":"readMode","name":"阅读模式","icon":"fa-solid fa-book-open","event":"readMode","group":"articlePage"}\]},"menus":{"link":\[{"id":"help","name":"分类","icon":"fa-solid fa-folder-open","link":"https://www.codeqihan.com/categories/","group":"link"},{"id":"help","name":"归档","icon":"fa-solid fa-archive","link":"https://www.codeqihan.com/archives/","group":"link"},{"id":"help","name":"说说","icon":"fa-solid fa-comment","link":"https://www.codeqihan.com/shuoshuo/","group":"link"},{"id":"help","name":"关于","icon":"fa-solid fa-info-circle","link":"https://www.codeqihan.com/about","group":"link"}\],"darkMode":\[{"id":"darkMode","name":"暗黑模式","icon":"fa-solid fa-moon","event":"volantis.dark.toggle()","group":"darkMode"}\]}} }, search: { dataPath: (("/" || "/").endsWith("/") ? "/" || "/" : "//" || "/") + "content.json", }, languages: { search: { hits\_empty: "找不到您查询的内容：${query}", hits\_stats: "找到 ${hits} 条结果，用时 ${time} 毫秒", } } }

-   
-   

[![](https://cdn.jsdmirror.com/npm/codeqihan-public@1.0.2/icon.png)](/)

-   [首页](/ "首页")
-   [分类](/categories/ "分类")
-   [归档](/archives/ "归档")
-   [开往](https://www.travellings.cn/go.html "开往")
-   [关于](/about/ "关于")

-   
-   -   [首页](/ "首页")
    -   [分类](/categories/ "分类")
    -   [归档](/archives/ "归档")
    -   [开往](https://www.travellings.cn/go.html "开往")
    -   [关于](/about/ "关于")

    

# 2024年度总结

[![](https://cdn.jsdmirror.com/npm/codeqihan-public@1.0.2/icon.png)

启涵

](/)

发布于：2024年12月31日

次浏览

今年因为时间问题，几乎没有怎么写博客。博客除了将底部的2023修改成2024，也几乎没有什么变化。今年下半年突然想起了我的这个博客，也做了一些很小的改动，记录一下，顺便写一下年度总结：

2023年的年度总结，因为懒，没有写，想写的时候已经2月份左右了，就没继续写。

博客在Vercel部署的时候总是会有一大堆错误，但是依然会正常部署。这个问题让我很困惑。这个月试着更新Hexo的版本，发现正常了。刚开始使用Hexo的时候，为了图方便，就直接复制Vercel的Hexo Example，加上主题使用。因为Vercel的Hexo Example的版本过低，出现了这样的问题（猜测是因为Volantis要求的Hexo版本最低为5.4，而Vercel的Hexo Example的Hexo版本为5.3，Hexo版本太低）。

这几天将评论系统以及我的一些服务的最低TLS版本要求设置成了TLS 1.2。TLS 1.0以及TLS 1.1在2021年就被弃用，并且存在安全隐患，不支持TLS 1.2的浏览器以及设备非常少，现在几乎不存在。目前很多网站也已经禁用TLS 1.2以下的TLS版本。不过对于博客评论系统的必要性还是不大，但Vercel支持的最低TLS版本也是TLS 1.2，评论系统也不太可能存在兼容性的问题（不支持TLS 1.2的也打不开博客），也就将评论系统以及一些服务都设置成了最低TLS 1.2。

因为时间问题，现在只能写到这里，后面可能会再补充，也祝愿2025年能越来越好！

> 博客内容遵循 署名-非商业性使用-相同方式共享 4.0 国际 (CC BY-NC-SA 4.0) 协议
> 
> 本文永久链接是：[https://www.codeqihan.com/post/2024-nian-du-zong-jie/](https://www.codeqihan.com/post/2024-nian-du-zong-jie/)

更新于：2025年1月1日

[

年度总结

](/tags/%E5%B9%B4%E5%BA%A6%E6%80%BB%E7%BB%93/)

年度总结

 [![](https://cdn.jsdmirror.com/npm/volantis-static@0.0.1660614606622/media/org.volantis/logo/128/qq.png)](http://connect.qq.com/widget/shareqq/index.html?url=https://www.codeqihan.com/post/2024-nian-du-zong-jie/&title=2024年度总结 - 启涵的博客&summary=)[![](https://cdn.jsdmirror.com/npm/volantis-static@0.0.1660614606622/media/org.volantis/logo/128/qzone.png) ](https://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=https://www.codeqihan.com/post/2024-nian-du-zong-jie/&title=2024年度总结 - 启涵的博客&summary=)[![](https://cdn.jsdmirror.com/npm/volantis-static@0.0.1660614606622/media/org.volantis/logo/128/weibo.png)](http://service.weibo.com/share/share.php?url=https://www.codeqihan.com/post/2024-nian-du-zong-jie/&title=2024年度总结 - 启涵的博客&summary=)

[

轻量级的探针-Beszel

简介 Beszel 是一个轻量级的服务器监控平台，包含 Docker 统计信息、历史数据和警报功能。 它拥有友好的 Web 界面、简单的配置，并且开箱即用。它支持自动备份、多用户、OAuth 身...

](/post/beszel/)

评论

站点信息

文章数目：

50 篇

已运行时间：

本站总字数：

14.1k 字

本站访客数：

人

本站总访问量：

次

最后活动时间：

2025-01-08 日

本文目录

  
  

  

博客内容遵循 [署名-非商业性使用-相同方式共享 4.0 国际 (CC BY-NC-SA 4.0) 协议](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)

本站使用 [Volantis](https://github.com/volantis-x/hexo-theme-volantis/#6.0.0-alpha.1) 作为主题，总访问量为 次

function runtime(){X=new Date("9/8/2022 18:50:50");Y=new Date();T=(Y.getTime()-X.getTime());M=24\*60\*60\*1000;a=T/M;A=Math.floor(a);b=(a-A)\*24;B=Math.floor(b);c=(b-B)\*60;C=Math.floor((b-B)\*60);D=Math.floor((c-C)\*60);span.innerHTML="本站已运行: "+A+"天"+B+"小时"+C+"分"+D+"秒"}setInterval(runtime,1000);

[Copyright © since 2022-2025 codeqihan](/)

[杜老师说](https://dusays.com/) | [网友小宋](https://xyzbz.cn/) | [Ryan’s Blog](https://www.moezz.cn/) | [萌ICP备20220166号](https://icp.gov.moe/?keyword=20220166)

/\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\* volantis.dom \*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*/ // 页面选择器 将dom对象缓存起来 see: /source/js/app.js etc. volantis.dom.bodyAnchor = volantis.dom.$(document.getElementById("safearea")); // 页面主体 volantis.dom.topBtn = volantis.dom.$(document.getElementById('s-top')); // 向上 volantis.dom.wrapper = volantis.dom.$(document.getElementById('wrapper')); // 整个导航栏 volantis.dom.coverAnchor = volantis.dom.$(document.querySelector('#l\_cover .cover-wrapper')); // 1个 volantis.dom.switcher = volantis.dom.$(document.querySelector('#l\_header .switcher .s-search')); // 搜索按钮 移动端 1个 volantis.dom.header = volantis.dom.$(document.getElementById('l\_header')); // 移动端导航栏 volantis.dom.search = volantis.dom.$(document.querySelector('#l\_header .m\_search')); // 搜索框 桌面端 移动端 1个 volantis.dom.mPhoneList = volantis.dom.$(document.querySelectorAll('#l\_header .m-phone .list-v')); // 手机端 子菜单 多个 volantis.css("https://mirrors.sustech.edu.cn/cdnjs/ajax/libs/font-awesome/6.6.0/css/all.min.css");

-   

---

-   粘贴文本
-   全选文本
-   剪切文本
-   复制文本
-   站内搜索
-   必应搜索
-   新标签页打开
-   复制链接地址
-   复制图片
-   谷歌识图
-   [分类](https://www.codeqihan.com/categories/)
-   [归档](https://www.codeqihan.com/archives/)
-   [说说](https://www.codeqihan.com/shuoshuo/)
-   [关于](https://www.codeqihan.com/about)

---

-   暗黑模式
-   打印页面
-   阅读模式

-   

const RightMenusFunction = {}; //RightMenusFunction\['copyPaste'\] = (fun) => {fun()} //RightMenusFunction\['copyAll'\] = (fun) => {fun()} //RightMenusFunction\['copyCut'\] = (fun) => {fun()} //RightMenusFunction\['copyText'\] = (fun) => {fun()} RightMenusFunction\['searchWord'\] = (\_\_text\_\_) => {OpenSearch(\_\_text\_\_)} RightMenusFunction\['bingSearch'\] = (\_\_text\_\_) => {window.open(\`https://cn.bing.com/search?q=${\_\_text\_\_}\`)} RightMenusFunction\['openTab'\] = (\_\_link\_\_) => {window.open(\_\_link\_\_)} //RightMenusFunction\['copyLink'\] = (fun) => {fun()} //RightMenusFunction\['copyImg'\] = (fun) => {fun()} RightMenusFunction\['googleImg'\] = (\_\_link\_\_) => {window.open(\`https://www.google.com.hk/searchbyimage?image\_url=${\_\_link\_\_}\`)} RightMenusFunction\['darkMode'\] = () => {volantis.dark.toggle()} //RightMenusFunction\['printMode'\] = (fun) => {fun()} //RightMenusFunction\['readMode'\] = (fun) => {fun()} const rootElement = document.documentElement; const darkModeStorageKey = "color-scheme"; const rootElementDarkModeAttributeName = "color-scheme"; const setLS = (k, v) => { localStorage.setItem(k, v); }; const removeLS = (k) => { localStorage.removeItem(k); }; const getLS = (k) => { return localStorage.getItem(k); }; const getModeFromCSSMediaQuery = () => { return window.matchMedia("(prefers-color-scheme: dark)").matches ? "dark" : "light"; }; const resetRootDarkModeAttributeAndLS = () => { rootElement.removeAttribute(rootElementDarkModeAttributeName); removeLS(darkModeStorageKey); }; const validColorModeKeys = { dark: true, light: true, }; const applyCustomDarkModeSettings = (mode) => { const currentSetting = mode || getLS(darkModeStorageKey); getCustomDarkMode(); if (currentSetting === getModeFromCSSMediaQuery()) { resetRootDarkModeAttributeAndLS(); } else if (validColorModeKeys\[currentSetting\]) { rootElement.setAttribute(rootElementDarkModeAttributeName, currentSetting); } else { resetRootDarkModeAttributeAndLS(); } }; const invertDarkModeObj = { dark: "light", light: "dark", }; /\*\* \* get target mode \*/ const getCustomDarkMode = () => { let currentSetting = getLS(darkModeStorageKey); if (validColorModeKeys\[currentSetting\]) { currentSetting = invertDarkModeObj\[currentSetting\]; } else if (currentSetting === null) { currentSetting = invertDarkModeObj\[getModeFromCSSMediaQuery()\]; } else { return; } if(currentSetting=="dark"){ volantis.dark.mode="light"; }else{ volantis.dark.mode="dark"; } // console.log(volantis.dark.mode) }; const toggleCustomDarkMode = () => { let currentSetting = getLS(darkModeStorageKey); if (validColorModeKeys\[currentSetting\]) { currentSetting = invertDarkModeObj\[currentSetting\]; } else if (currentSetting === null) { currentSetting = invertDarkModeObj\[getModeFromCSSMediaQuery()\]; } else { return; } setLS(darkModeStorageKey, currentSetting); return currentSetting; }; /\*\* \* 暗黑模式触发器 \*/ volantis.dark.toggle=()=>{ const mode = toggleCustomDarkMode(); applyCustomDarkModeSettings(mode); // 使用 volantis.dark.push 方法传入volantis.dark.toggle回调函数 参见layout/\_partial/scripts/global.ejs volantis.dark.method.toggle.start(); } /\*\* \* bind event for toggle button \*/ function bindToggleButton() { var btn= document.querySelectorAll("#wrapper .toggle-mode-btn,#rightmenu-wrapper .toggle-mode-btn") btn.forEach(function (e) { volantis.dom.$(e).on('click',volantis.dark.toggle); }) } applyCustomDarkModeSettings(); document.addEventListener("DOMContentLoaded", ()=>{ volantis.requestAnimationFrame(bindToggleButton) }); const darkModelListeners={ dark:(mediaQueryList )=>{ if(mediaQueryList.matches){ volantis.dark.mode = "dark"; } volantis.dark.method.toggle.start(); }, light:(mediaQueryList)=>{ if(mediaQueryList.matches){ volantis.dark.mode = "light"; } volantis.dark.method.toggle.start(); } } window.matchMedia('(prefers-color-scheme: dark)').addListener(darkModelListeners.dark) window.matchMedia('(prefers-color-scheme: light)').addListener(darkModelListeners.light) function loadIssuesJS() { const sites\_api = document.getElementById('sites-api'); if (sites\_api != undefined && typeof SitesJS === 'undefined') { volantis.js("/js/plugins/tags/sites.js") } const friends\_api = document.getElementById('friends-api'); if (friends\_api != undefined && typeof FriendsJS === 'undefined') { volantis.js("/js/plugins/tags/friends.js") } const contributors\_api = document.getElementById('contributors-api'); if (contributors\_api != undefined && typeof ContributorsJS === 'undefined') { volantis.js("/js/plugins/tags/contributors.js") } }; loadIssuesJS() // https://www.npmjs.com/package/vanilla-lazyload // Set the options globally // to make LazyLoad self-initialize window.lazyLoadOptions = { elements\_selector: ".lazyload", threshold: 0 }; // Listen to the initialization event // and get the instance of LazyLoad window.addEventListener( "LazyLoad::Initialized", function (event) { window.lazyLoadInstance = event.detail.instance; }, false ); document.addEventListener('DOMContentLoaded', function () { lazyLoadInstance.update(); }); window.FPConfig = { delay: 0, ignoreKeywords: \["#"\], maxRPS: 6, hoverDelay: 0 }; volantis.layoutHelper("comments",\`<div id="artalk\_container"><i class="fa-solid fa-cog fa-spin fa-fw fa-2x"></i></div>\`); function load\_artalk() { if(!document.querySelectorAll("#artalk\_container")\[0\])return; volantis.css("https://cdn.jsdmirror.com/npm/artalk@2.9.1/dist/Artalk.css"); volantis.js("https://cdn.jsdmirror.com/npm/artalk@2.9.1/dist/Artalk.js").then(p\_artalk); } function p\_artalk() { if(!document.querySelectorAll("#artalk\_container")\[0\])return; let path = pdata.commentPath; let placeholder = pdata.commentPlaceholder || "" || ""; if (path.length == 0) { path = '' || decodeURI(window.location.pathname); } if(!'/post/:name/'.includes('/index.html')) { path = path.replaceAll('/index.html', '/').replaceAll('.html', '') } volantis.artalk = Artalk.init(Object.assign({"server":"https://pinglun.codeqihan.com","path":null,"placeholder":null,"visitor":false,"latex":false,"imageUploader":{"api":null,"token":null,"resp":null}}, { el: '#artalk\_container', pageKey: path, pageTitle: document.title, placeholder: placeholder, site: '启涵的博客', darkMode: volantis.dark.mode === "dark", pvEl: '#artalk\_visitors', })); if (typeof VolantisFancyBox === "undefined"){ const checkFancyBox = setInterval(() => { if(typeof VolantisFancyBox === "undefined") return; clearInterval(checkFancyBox); VolantisFancyBox.bind('.atk-content img:not(\[atk-emoticon\])'); }) } else { VolantisFancyBox.bind('.atk-content img:not(\[atk-emoticon\])'); } } load\_artalk(); function dark\_artalk() { if(!document.querySelectorAll("#artalk\_container")\[0\]) return; volantis?.artalk?.setDarkMode(volantis.dark.mode === "dark") } volantis.dark.push(dark\_artalk); async function loadSearchScript() { return volantis.js("/js/search/hexo.js"); } function loadSearchService() { loadSearchScript(); document.querySelectorAll(".input.u-search-input").forEach((e) => { e.removeEventListener("focus", loadSearchService, false); }); document.querySelectorAll(".u-search-form").forEach((e) => { e.addEventListener("submit", (event) => { event.preventDefault(); }, false); }); } // 打开并搜索 字符串 s function OpenSearch(s) { if (typeof SearchService === 'undefined') loadSearchScript().then(() => { SearchService.setQueryText(s); SearchService.search(); }); else { SearchService.setQueryText(s); SearchService.search(); } } // 访问含有 ?s=xxx 的链接时打开搜索 // 与搜索引擎 structured data 相关: /scripts/helpers/structured-data/lib/config.js if (window.location.search && /^\\?s=/g.test(window.location.search)) { let queryText = decodeURI(window.location.search) .replace(/\\ /g, "-") .replace(/^\\?s=/g, ""); OpenSearch(queryText); } // 搜索输入框获取焦点时加载搜索 document.querySelectorAll(".input.u-search-input").forEach((e) => { e.addEventListener("focus", loadSearchService, false); }); function p\_highlightjs\_copyCode(){ if (!(document.querySelector(".highlight .code pre") || document.querySelector(".article pre code"))) { return; } VolantisApp.utilCopyCode(".highlight .code pre, .article pre code") } volantis.requestAnimationFrame(p\_highlightjs\_copyCode) function load\_swiper() { if (!document.querySelectorAll(".swiper-container")\[0\]) return; volantis.css("https://mirrors.sustech.edu.cn/cdnjs/ajax/libs/Swiper/11.1.14/swiper-bundle.min.css"); volantis.js("https://mirrors.sustech.edu.cn/cdnjs/ajax/libs/Swiper/11.1.14/swiper-bundle.min.js").then(() => { p\_swiper(); }); } load\_swiper(); function p\_swiper() { volantis.swiper = new Swiper('.swiper-container', { slidesPerView: 'auto', spaceBetween: 8, centeredSlides: true, loop: true, pagination: { el: '.swiper-pagination', clickable: true, }, navigation: { nextEl: '.swiper-button-next', prevEl: '.swiper-button-prev', }, }); } volantis.css("https://mirrors.sustech.edu.cn/cdnjs/ajax/libs/pace/1.2.4/themes/blue/pace-theme-minimal.min.css"); volantis.js("https://mirrors.sustech.edu.cn/cdnjs/ajax/libs/pace/1.2.4/pace.min.js").then(() => { Pace.options.restartOnPushState = false; // 阅读进度 volantis.scroll.push(() => { Pace.stop(); Pace.trigger('start'); Pace.bar.update(volantis.scroll.progress() \* 100); document.body.className = document.body.className.replaceAll("pace-running ",""); },"阅读进度") // todo：配置项开关, 哪些页面添加阅读进度 }) function listenSidebarTOC() { const navItems = document.querySelectorAll(".toc li"); if (!navItems.length) return; const targets = \[\] const sections = Array.from(navItems).forEach((element) => { const link = element.querySelector(".toc-link"); const target = document.getElementById( link.getAttribute("href") ? decodeURI(link.getAttribute("href")).replace("#", "") : link.getAttribute("toc-action").split("toc-")\[1\] // 兼容 hexo-blog-encrypt ); targets.push(target) // 解除 a 标签 href 的 锚点定位, a 标签 href 的 锚点定位 会随机启用?? 产生错位??? if (link.getAttribute("href")) { link.setAttribute("toc-action", "toc-" + decodeURI(link.getAttribute("href")).replace("#", "")) link.removeAttribute("href") } // 配置 点击 触发新的锚点定位 if (target && target.id) { link.addEventListener("click", (event) => { event.preventDefault(); // 这里的 addTop 是通过错位使得 toc 自动展开. volantis.scroll.to(target, { addTop: 5, observer: true }) // Anchor id history.pushState(null, document.title, "#" + target.id); }); } return target; }); function activateNavByIndex(target) { if (target.classList.contains("active-current")) return; document.querySelectorAll(".toc .active").forEach((element) => { element.classList.remove("active", "active-current"); }); target.classList.add("active", "active-current"); let parent = target.parentNode; while (!parent.matches(".toc")) { if (parent.matches("li")) parent.classList.add("active"); parent = parent.parentNode; } } // 方案一： volantis.activateNavIndex = 0 activateNavByIndex(navItems\[volantis.activateNavIndex\]) if (targets\[0\]) { volantis.scroll.push(() => { if (targets\[0\].getBoundingClientRect().top >= 0) { volantis.activateNavIndex = 0 } else if (targets\[targets.length - 1\].getBoundingClientRect().top < 0) { volantis.activateNavIndex = targets.length - 1 } else { for (let index = 0; index < targets.length; index++) { const target0 = targets\[index\]; const target1 = targets\[(index + 1) % targets.length\]; if (target0.getBoundingClientRect().top < 0 && target1.getBoundingClientRect().top >= 0) { volantis.activateNavIndex = index break; } } } activateNavByIndex(navItems\[volantis.activateNavIndex\]) }) } // 方案二： // IntersectionObserver 不是完美精确到像素级别 也不是低延时性的 // function findIndex(entries) { // let index = 0; // let entry = entries\[index\]; // if (entry.boundingClientRect.top > 0) { // index = sections.indexOf(entry.target); // return index === 0 ? 0 : index - 1; // } // for (; index < entries.length; index++) { // if (entries\[index\].boundingClientRect.top <= 0) { // entry = entries\[index\]; // } else { // return sections.indexOf(entry.target); // } // } // return sections.indexOf(entry.target); // } // function createIntersectionObserver(marginTop) { // marginTop = Math.floor(marginTop + 10000); // let intersectionObserver = new IntersectionObserver( // (entries, observe) => { // let scrollHeight = document.documentElement.scrollHeight; // if (scrollHeight > marginTop) { // observe.disconnect(); // createIntersectionObserver(scrollHeight); // return; // } // let index = findIndex(entries); // activateNavByIndex(navItems\[index\]); // }, { // rootMargin: marginTop + "px 0px -100% 0px", // threshold: 0, // } // ); // sections.forEach((element) => { // element && intersectionObserver.observe(element); // }); // } // createIntersectionObserver(document.documentElement.scrollHeight); } document.addEventListener("DOMContentLoaded", () => { volantis.requestAnimationFrame(listenSidebarTOC) }); document.onreadystatechange = function () { if (document.readyState == 'complete') { // 页面加载完毕 样式加载失败，或是当前网速慢，或是开启了省流模式 const { saveData, effectiveType } = navigator.connection || navigator.mozConnection || navigator.webkitConnection || {} if (getComputedStyle(document.querySelector("#safearea"), null)\["display"\] == "none" || saveData || /2g/.test(effectiveType)) { document.querySelectorAll(".reveal").forEach(function (e) { e.style\["opacity"\] = "1"; }); document.querySelector("#safearea").style\["display"\] = "block"; } } } \[{"@context":"http://schema.org","@type":"Organization","name":"启涵的博客","url":"https://www.codeqihan.com/","logo":{"@type":"ImageObject","url":"https://cdn.jsdmirror.com/npm/volantis-static@0.0.1660614606622/media/org.volantis/blog/favicon/android-chrome-192x192.png","width":192,"height":192}},{"@context":"http://schema.org","@type":"Person","name":"codeqihan","image":{"@type":"ImageObject","url":"https://cdn.jsdmirror.com/npm/volantis-static@0.0.1660614606622/media/org.volantis/blog/favicon/android-chrome-192x192.png"},"url":"https://www.codeqihan.com/","sameAs":\["https://github.com/volantis-x"\],"description":"启涵的一个个人博客"},{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":\[{"@type":"ListItem","position":1,"item":{"@id":"https://www.codeqihan.com/","name":"启涵的博客"}},{"@type":"ListItem","position":3,"item":{"@id":"https://www.codeqihan.com//post/2024-nian-du-zong-jie/","name":"2024年度总结"}}\]},{"@context":"http://schema.org","@type":"WebSite","name":"启涵的博客","url":"https://www.codeqihan.com/","keywords":"启涵的博客,个人博客,博客,启涵,codeqihan,codeqihan的博客","description":"启涵的一个个人博客","author":{"@type":"Person","name":"codeqihan","image":{"@type":"ImageObject","url":"https://cdn.jsdmirror.com/npm/volantis-static@0.0.1660614606622/media/org.volantis/blog/favicon/android-chrome-192x192.png"},"url":"https://www.codeqihan.com/","description":"启涵的一个个人博客"},"publisher":{"@type":"Organization","name":"启涵的博客","url":"https://www.codeqihan.com/","logo":{"@type":"ImageObject","url":"https://cdn.jsdmirror.com/npm/volantis-static@0.0.1660614606622/media/org.volantis/blog/favicon/android-chrome-192x192.png","width":192,"height":192}},"potentialAction":{"@type":"SearchAction","name":"Site Search","target":{"@type":"EntryPoint","urlTemplate":"https://www.codeqihan.com?s={search\_term\_string}"},"query-input":"required name=search\_term\_string"}},{"@context":"http://schema.org","@type":"BlogPosting","headline":"2024年度总结","description":"启涵的一个个人博客","inLanguage":"zh-CN","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.codeqihan.com/post/2024-nian-du-zong-jie/"},"author":{"@type":"Person","name":"codeqihan","image":{"@type":"ImageObject","url":"https://cdn.jsdmirror.com/npm/volantis-static@0.0.1660614606622/media/org.volantis/blog/favicon/android-chrome-192x192.png"},"url":"https://www.codeqihan.com/"},"publisher":{"@type":"Organization","name":"启涵的博客","logo":{"@type":"ImageObject","url":"https://cdn.jsdmirror.com/npm/volantis-static@0.0.1660614606622/media/org.volantis/blog/favicon/android-chrome-192x192.png","width":192,"height":192}},"url":"https://www.codeqihan.com/post/2024-nian-du-zong-jie/","wordCount":0,"datePublished":"2024-12-31T14:00:00.000Z","dateModified":"2025-01-01T09:10:00.000Z","keywords":"年度总结","image":{"@type":"ImageObject","url":"https://cdn.jsdmirror.com/npm/volantis-static@0.0.1660614606622/media/org.volantis/blog/favicon/android-chrome-192x192.png","width":192,"height":192}}\]